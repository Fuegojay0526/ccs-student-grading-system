USE mvc_framework;

 DROP PROCEDURE IF EXISTS UsersAccount_Login;

 

  CREATE PROCEDURE UsersAccount_Login( _Username VARCHAR(100), _Password VARCHAR(100))

    BEGIN
   
      Select Record_ID, Users_Info, Identity, Time_Stamp FROM (SELECT Record_ID, Users_Info, Identity, Time_Stamp, UPPER(Users_Info) 
           AS CapUserInfo FROM Users_account) AS MyTable Where (CapUserInfo->>'$.USERNAME'  = UPPER(_Username) 
            and Users_Info->>'$.Password' = _Password and Users_Info->>'$.Status'='Active');
 
   END